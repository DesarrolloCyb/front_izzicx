<div class="component__content">

    <app-breadcrumb [pageTitle]="'Subcategorías'"></app-breadcrumb>

    <div class="crear">
        <button pButton label="Agregar nueva fila" class="p-button-outlined agregar__btn" (click)="agregarFila()"></button>
    </div>

    <div>
        <div class="tabla">
            <p-table [value]="row" [rowHover]="true" responsiveLayout="scroll">
                <ng-template pTemplate="header" >
                <tr>
                        <!-- AQUÍ SE CARGAN LOS QUE ESTÁN EN LA DB-->
                        <th class="styles" [class]="mode ? 'column' : 'column--ligh' " [style]=" mode ? '' : 'border-bottom: 1px solid #000;' " *ngFor="let col of columnasDB">{{ col }}</th>
                        <th class="styles" [class]="mode ? 'column' : 'column--ligh' " [style]=" mode ? '' : 'border-bottom: 1px solid #000;' ">Acción</th>
                </tr>
                </ng-template>
                <ng-template pTemplate="body" let-row let-i="index">
                    <tr [class]="mode ? 'row' : 'row--light' " *ngFor="let subcat of subcategorias">
                        <td style="text-align: center;" [style]=" mode ? '' : 'border-bottom: 1px solid #000;' ">{{subcat.id_subcategorias}}</td>
    
                        <td style="text-align: center;" [style]=" mode ? '' : 'border-bottom: 1px solid #000;'"> {{subcat.nombre_subcategoria}} </td>

                        <td style="text-align: center;" [style]=" mode ? '' : 'border-bottom: 1px solid #000;'"> {{subcat.nombre_categoria}} </td>
    
                        <td style="text-align: center;" [style]=" mode ? '' : 'border-bottom: 1px solid #000;'">
                            <button class="eliminar__btn" [class]="!mode ? 'eliminar__btn--light' : '' " pButton (click)="deleteRow(subcat)">Eliminar</button>
                        </td>
                    </tr>
        
                    <!-- NUEVAS FILAS -->
                    <tr *ngFor="let nuevaFila of nuevasFilas; let rowIndex = index">
                        <td>
                            <!-- <input value="{{subcat.id}}"> -->
                        </td>

                        <td style="text-align: center;">
                            <input type="text" [(ngModel)]="nuevaFila.subcategoria" placeholder="Subcategoría">
                        </td>

                        <td style="text-align: center;">
							<p-dropdown [options]="categorias" [(ngModel)]="nuevaFila.categoria" optionLabel="nombre_categoria" [appendTo]="'body'"></p-dropdown>
                        </td>

                        <td style="text-align: center;">
                        
                        </td>
                    </tr>
                </ng-template>
            </p-table>
    
            <div class="guia__btns">
                <button pButton label="Guardar Fila" class="p-button-outlined guardar__btn" [disabled]="!ableBtnFila" (click)="validarFilas()"></button>
            </div>

    
        </div>
    
     </div>
</div>




<p-toast></p-toast>
